<!DOCTYPE html>
<html lang="en">

<head>
  <title>Add New Course</title>
  <!-- META TAGS -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- FAV ICON(BROWSER TAB ICON) -->
  <link rel="shortcut icon" href="images/uccd-logo.png" type="image/x-icon" />
  <!-- GOOGLE FONT -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700%7CJosefin+Sans:600,700"
    rel="stylesheet" />
  <!-- FONTAWESOME ICONS -->
  <link rel="stylesheet" href="css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />

  <!-- ALL CSS FILES -->
  <link href="css/bootstrap.css" rel="stylesheet" />
  <link href="css/style.css" rel="stylesheet" />
  <!-- RESPONSIVE.CSS ONLY FOR MOBILE AND TABLET VIEWS -->
  <link href="css/style-mob.css" rel="stylesheet" />

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet" />
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />
  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet" />

  <!-- Custom styles for this page -->
  <style>
    :root {
      --primary-color: #0d6efd;
      --secondary-color: #6c757d;
      --success-color: #198754;
      --info-color: #0dcaf0;
      --warning-color: #ffc107;
      --danger-color: #dc3545;
      --light-color: #f8f9fa;
      --dark-color: #212529;
    }

    body {
      background-color: #f5f7fa;
      font-family: 'Open Sans', sans-serif;
    }

    .admin-card {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1);
      margin-bottom: 2rem;
      overflow: hidden;
    }

    .card-body {
      padding: 2rem;
    }

    .inn-title {
      margin-bottom: 1.5rem;
    }

    .inn-title h4 {
      color: var(--primary-color);
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-label {
      font-weight: 500;
      margin-bottom: 0.5rem;
      color: var(--dark-color);
    }

    .form-control,
    .form-select {
      border-radius: 5px;
      border: 1px solid #ced4da;
      padding: 0.75rem;
      transition: border-color 0.2s ease-in-out;
      font-size: 1.3rem;
      /* Increased font size for inputs */
    }

    .form-control:focus,
    .form-select:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
    }

    /* Enhanced placeholder styling */
    ::placeholder {
      font-size: 1.5rem;
      color: #a0a6ab;
      opacity: 1;
    }

    :-ms-input-placeholder {
      font-size: 1.5rem;
      color: #a0a6ab;
    }

    ::-ms-input-placeholder {
      font-size: 1.5rem;
      color: #a0a6ab;
    }

    .btn {
      font-weight: 500;
      padding: 0.75rem 1.5rem;
      border-radius: 5px;
      transition: all 0.3s ease;
      font-size: 1.3rem;
      /* Increased button text size */
      letter-spacing: 0.02em;
      /* Improved letter spacing for readability */
    }

    .btn i {
      margin-right: 0.5rem;
      /* Space between icon and text */
    }

    .btn-primary {
      background-color: var(--primary-color);
      border-color: var(--primary-color);
    }

    .btn-primary:hover {
      background-color: #0b5ed7;
      border-color: #0a58ca;
    }

    .btn-secondary {
      background-color: var(--secondary-color);
      border-color: var(--secondary-color);
      margin-left: 10px;
    }

    .required-field::after {
      content: "*";
      color: var(--danger-color);
      margin-left: 4px;
    }

    .section-heading {
      background-color: #f8f9fa;
      padding: 0.75rem 1rem;
      margin-bottom: 1rem;
      border-radius: 5px;
      border-left: 4px solid var(--primary-color);
    }

    .custom-file-input {
      cursor: pointer;
    }

    .gallery-preview {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 15px;
    }

    .gallery-preview img {
      width: 150px;
      height: 100px;
      object-fit: cover;
      border-radius: 5px;
      border: 1px solid #ddd;
    }

    .admin-upload-btn {
      position: relative;
      overflow: hidden;
      display: inline-block;
    }

    .admin-upload-btn input[type=file] {
      font-size: 100px;
      position: absolute;
      left: 0;
      top: 0;
      opacity: 0;
      cursor: pointer;
    }

    .gallery-preview .position-relative {
      width: 150px;
      height: 100px;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
      transition: transform 0.2s;
    }

    .gallery-preview .position-relative:hover {
      transform: scale(1.05);
    }

    .gallery-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .gallery-preview .btn-danger {
      padding: 0.25rem 0.5rem;
      opacity: 0.8;
    }

    .gallery-preview .btn-danger:hover {
      opacity: 1;
    }

    /* Custom file input styling */
    .custom-file-label {
      font-size: 1.1rem;
      color: #6c757d;
    }

    /* Small text improvements */
    .text-muted {
      font-size: 0.95rem;
      color: #6c757d;
    }

    /* Tag styles for prerequisites and goals */
    .tag-item {
      display: inline-block;
      background-color: #e9ecef;
      border: 1px solid #dee2e6;
      border-radius: 3px;
      padding: 0.35rem 0.75rem;
      margin-right: 0.5rem;
      margin-bottom: 0.5rem;
      font-size: 1rem;
    }

    .tag-item .remove-tag {
      margin-left: 0.5rem;
      color: #6c757d;
      cursor: pointer;
      font-weight: bold;
    }

    .tag-item .remove-tag:hover {
      color: #dc3545;
    }

    #prerequisites-list,
    #goals-list {
      min-height: 2.5rem;
    }
  </style>
</head>

<body>
  <!--== MAIN CONTRAINER ==-->
  <header id="header" style="border-bottom: 2px solid #e3e8ea" class="header d d-flex align-items-center sticky-top">
    <img class="sd-tog" src="assets/img/side-bar.png" style="margin: 0 15px; width: 29px" alt="" />
    <div class="container-fluid container-xl position-relative d-flex align-items-center">
      <a href="index.html" class="logo d-flex align-items-center me-auto">
        <h1 class="sitename">UCCD</h1>
      </a>

      <nav id="navmenu" class="navmenu navmenu-user">
        <ul>
          <li>
            <a href="#" class="logout-btn">
              <i class="bi bi-box-arrow-right"></i>
              <span>Log Out</span>
            </a>
          </li>
        </ul>
        <i class="mobile-nav-toggle bi bi-person-circle"></i>
      </nav>
    </div>
  </header>

  <!--== BODY CONTNAINER ==-->
  <div class="container-fluid sb2">
    <div class="row">
      <div class="sb2-1" style="background-color: white; float: left; width: 19.5%">
        <!--== LEFT MENU ==-->
        <div class="sb2-13">
          <ul class="collapsible" data-collapsible="accordion">
            <li>
              <a href="admin.html"><i class="fa fa-bar-chart" aria-hidden="true"></i>
                Dashboard</a>
            </li>

            <li>
              <a href="javascript:void(0)" class="collapsible-header"><i class="fa fa-book" aria-hidden="true"></i> All
                Courses</a>
              <div class="collapsible-body left-sub-menu">
                <ul>
                  <li><a href="admin-all-courses.html">All Course</a></li>
                  <li><a href="admin-add-courses.html" class="menu-active">Add New Course</a></li>
                  <li><a href="admin-trash-courses.html">Trash Course</a></li>
                </ul>
              </div>
            </li>
            <li>
              <a href="javascript:void(0)" class="collapsible-header"><i class="fa fa-user" aria-hidden="true"></i>
                Instructors</a>
              <div class="collapsible-body left-sub-menu">
                <ul>
                  <li>
                    <a class="inst-mg-btn" href="#">Manage</a>
                  </li>

                  <li><a class="inst-v-all" href="#">All Users</a></li>
                </ul>
              </div>
            </li>
            <li>
              <a href="javascript:void(0)" class="collapsible-header"><i class="fa fa-calendar" aria-hidden="true"></i>
                Posts</a>
              <div class="collapsible-body left-sub-menu">
                <ul>
                  <li><a href="admin-post-all.html">All Posts</a></li>
                  <li>
                    <a href="admin-post-add.html">Create New Post</a>
                  </li>
                </ul>
              </div>
            </li>
            <li>
              <a href="javascript:void(0)" class="collapsible-header"><i class="fa fa-users" aria-hidden="true"></i>
                Students</a>
              <div class="collapsible-body left-sub-menu">
                <ul>
                  <li><a href="admin-all-student.html">All Students</a></li>
                  <li><a href="admin-add-student.html">Add New Students</a></li>
                </ul>
              </div>
            </li>

          </ul>
        </div>
      </div>
      <!-- Content Area -->
      <div class="sb2-2" style="padding: 40px; width: 80%">
        <div class="sb2-2-1">
          <h2>Add New Course</h2>

          <div class="admin-card">
            <div class="card-body">
              <!-- Simple Form -->
              <div class="box-inn-sp">
                <div class="inn-title">
                  <h4>Course Information</h4>
                  <p>
                    Fill out all the required fields to create a new course
                  </p>
                </div>
                <div class="bor">
                  <form id="coursesForm"> <!-- Course Basic Information -->
                    <div class="section-heading">
                      <h5><i class="fa fa-info-circle"></i> Basic Information</h5>
                    </div>
                    <div class="row">
                      <div class="col-md-12">
                        <div class="form-group mb-3">
                          <label class="form-label">Course Title <span class="text-danger">*</span></label>
                          <input type="text" class="form-control" name="courseTitle" required
                            placeholder="Enter course title" />
                          <div class="invalid-feedback">Please enter a course title</div>
                        </div>
                      </div>
                    </div>

                    <div class="form-group mb-3">
                      <label class="form-label">Course Description <span class="text-danger">*</span></label>
                      <textarea class="form-control" name="description" rows="4" required
                        placeholder="Provide detailed course description"></textarea>
                      <div class="invalid-feedback">Please enter a course description</div>
                    </div>

                    <div class="row">
                      <div class="col-md-6">
                        <div class="form-group mb-3">
                          <label class="form-label">Instructors <span class="text-danger">*</span></label>
                          <select class="form-control" name="instructor" required>
                            <option value="" disabled selected>Select Instructor</option>
                            <option value="instructor1">Dr. John Smith</option>
                            <option value="instructor2">Prof. Sarah Johnson</option>
                            <option value="instructor3">Dr. Michael Brown</option>
                            <option value="instructor4">Prof. Emily Davis</option>
                            <option value="instructor5">Dr. David Wilson</option>
                          </select>
                          <div class="invalid-feedback">Please select an instructor</div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group mb-3">
                          <label class="form-label">Course Category <span class="text-danger">*</span></label>
                          <select class="form-control" name="category" required>
                            <option value="" disabled selected>Select Category</option>
                            <option value="engineering">Engineering</option>
                            <option value="business">Business</option>
                            <option value="arts">Arts</option>
                            <option value="sciences">Sciences</option>
                            <option value="technology">Technology</option>
                            <option value="healthcare">Healthcare</option>
                            <option value="other">Other</option>
                          </select>
                          <div class="invalid-feedback">Please select a category</div>
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-6">
                        <div class="form-group mb-3">
                          <label class="form-label">Room Number <span class="text-danger">*</span></label>
                          <input type="text" class="form-control" name="roomNumber" required
                            placeholder="Enter room number (e.g., A-101)" />
                          <div class="invalid-feedback">Please enter a room number</div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group mb-3">
                          <label class="form-label">Duration <span class="text-danger">*</span></label>
                          <div class="input-group">
                            <input type="number" class="form-control" name="duration" required min="1"
                              placeholder="Duration" />

                          </div>
                          <div class="invalid-feedback">Please enter the duration</div>
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-12">
                        <div class="form-group mb-3">
                          <label class="form-label">Maximum Accepted Students <span class="text-danger">*</span></label>
                          <input type="number" class="form-control" name="maxStudents" required min="1"
                            placeholder="Enter maximum number of students" />
                          <div class="invalid-feedback">Please enter maximum number of students</div>
                        </div>
                      </div>
                    </div>

                    <!-- Course Prerequisites -->
                    <div class="section-heading mt-4">
                      <h5><i class="fa fa-check-circle"></i> Prerequisites and Goals</h5>
                    </div>
                    <div class="form-group mb-4">
                      <label class="form-label">Prerequisites & Skills <span class="text-danger">*</span></label>
                      <div id="prerequisites-container">
                        <div class="input-group mb-2">
                          <input type="text" class="form-control prerequisite-item"
                            placeholder="Enter a prerequisite or skill" />
                          <button type="button" class="btn btn-primary add-prerequisite">
                            <i class="fa fa-plus"></i>
                          </button>
                        </div>
                      </div>
                      <div id="prerequisites-list" class="mt-2">
                        <!-- Prerequisites items will be displayed here as tags -->
                      </div>
                      <input type="hidden" name="prerequisites" id="prerequisites-hidden" required />
                      <small class="text-muted">Add academic prerequisites, technical requirements, or skill levels
                        needed</small>
                      <div class="invalid-feedback">Please add at least one prerequisite or skill</div>
                    </div>

                    <div class="form-group mb-4">
                      <label class="form-label">Course Goals <span class="text-danger">*</span></label>
                      <div id="goals-container">
                        <div class="input-group mb-2">
                          <input type="text" class="form-control goal-item" placeholder="Enter a course goal" />
                          <button type="button" class="btn btn-primary add-goal">
                            <i class="fa fa-plus"></i>
                          </button>
                        </div>
                      </div>
                      <div id="goals-list" class="mt-2">
                        <!-- Course goals will be displayed here as tags -->
                      </div>
                      <input type="hidden" name="goals" id="goals-hidden" required />
                      <small class="text-muted">Add specific learning objectives students will achieve by completing
                        this course</small>
                      <div class="invalid-feedback">Please add at least one course goal</div>
                    </div><!-- Course Schedule -->
                    <div class="section-heading mt-4">
                      <h5><i class="fa fa-calendar"></i> Course Schedule</h5>
                    </div>

                    <div class="row mb-4">
                      <div class="col-md-6">
                        <div class="form-group mb-3">
                          <label class="form-label">Start Date <span class="text-danger">*</span></label>
                          <input type="date" class="form-control" name="startDate" required />
                          <div class="invalid-feedback">Please select a start date</div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group mb-3">
                          <label class="form-label">End Date <span class="text-danger">*</span></label>
                          <input type="date" class="form-control" name="endDate" required />
                          <div class="invalid-feedback">Please select an end date</div>
                        </div>
                      </div>
                    </div>

                    <!-- Interview Schedule -->
                    <div class="section-heading mt-4">
                      <h5><i class="fa fa-comments"></i> Interview Schedule</h5>
                    </div>

                    <div class="row mb-4">
                      <div class="col-md-6">
                        <div class="form-group mb-3">
                          <label class="form-label">Interview Start Date <span class="text-danger">*</span></label>
                          <input type="date" class="form-control" name="interviewStartDate" required />
                          <div class="invalid-feedback">Please select an interview start date</div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group mb-3">
                          <label class="form-label">Interview End Date <span class="text-danger">*</span></label>
                          <input type="date" class="form-control" name="interviewEndDate" required />
                          <div class="invalid-feedback">Please select an interview end date</div>
                        </div>
                      </div>
                    </div>

                    <!-- Banner Image -->
                    <div class="section-heading mt-4">
                      <h5><i class="fa fa-picture-o"></i> Banner Image</h5>
                    </div>

                    <div class="form-group mb-4">
                      <label class="form-label">Course Banner Image <span class="text-danger">*</span></label>
                      <div class="admin-upload-btn">
                        <div class="custom-file">
                          <input type="file" class="custom-file-input form-control" id="courseImage" name="bannerImage"
                            accept="image/*" required />
                          <label class="custom-file-label" for="courseImage">Choose file</label>
                        </div>
                      </div>
                      <small class="text-muted d-block mt-1">Recommended size: 1200x600 pixels, max 2MB</small>
                      <div class="invalid-feedback">Please upload a banner image</div>
                    </div>

                    <div class="row">
                      <div class="col-md-12">
                        <div class="gallery-preview">
                          <!-- Image previews will appear here -->
                        </div>
                      </div>
                    </div>

                    <div class="d-flex mt-4">
                      <button type="submit" class="btn btn-primary">
                        <i class="fa fa-save"></i> Save Course
                      </button>
                      <button type="reset" class="btn btn-secondary">
                        <i class="fa fa-refresh"></i> Reset
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- JavaScript -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    $(document).ready(function () {
      // Initialize collapsible sidebar menu
      $(".collapsible-body").hide(); // Ensure all collapsible sections are hidden initially

      $(".collapsible-header").click(function (e) {
        e.preventDefault();
        $(this).next(".collapsible-body").slideToggle();
        $(".collapsible-body").not($(this).next()).slideUp();
      });

      // Form validation
      const validateForm = (formElement) => {
        let isValid = true;
        const requiredInputs = $(formElement).find('[required]');

        requiredInputs.each(function () {
          if (!$(this).val()) {
            $(this).addClass('is-invalid');
            isValid = false;
          } else {
            $(this).removeClass('is-invalid');
          }
        });

        return isValid;
      };      // Handle form submission with validation
      $('#coursesForm').submit(function (e) {
        e.preventDefault();

        // Update hidden fields with array values before validation
        updateHiddenFields();

        if (validateForm(this)) {
          // Form data collection
          const formData = {
            courseTitle: $('input[name="courseTitle"]').val(),
            description: $('textarea[name="description"]').val(),
            instructor: $('select[name="instructor"]').val(),
            category: $('select[name="category"]').val(),
            roomNumber: $('input[name="roomNumber"]').val(),
            duration: $('input[name="duration"]').val(),
            maxStudents: $('input[name="maxStudents"]').val(),
            prerequisites: JSON.parse($('#prerequisites-hidden').val() || '[]'),
            goals: JSON.parse($('#goals-hidden').val() || '[]'),
            startDate: $('input[name="startDate"]').val(),
            endDate: $('input[name="endDate"]').val(),
            interviewStartDate: $('input[name="interviewStartDate"]').val(),
            interviewEndDate: $('input[name="interviewEndDate"]').val()
          };

          console.log('Form data:', formData);
          // In a real application, you would send this data to the server
          alert('Course added successfully!');

          // Uncomment to reset the form after successful submission
          // this.reset();
          // $('.gallery-preview').html('');
          // $('#prerequisites-list, #goals-list').empty();
          // updateHiddenFields();
        }
      });

      // Reset validation state when input changes
      $('form input, form textarea, form select').on('input change', function () {
        $(this).removeClass('is-invalid');
      });

      // Image preview for course banner
      $('#courseImage').change(function () {
        const file = this.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function (e) {
            // Clear existing previews
            $('.gallery-preview').html('');

            // Add new preview
            $('.gallery-preview').append(`
              <div class="position-relative">
                <img src="${e.target.result}" alt="Preview" class="img-fluid">
                <div class="position-absolute top-0 end-0">
                  <button type="button" class="btn btn-sm btn-danger remove-image">
                    <i class="fa fa-times"></i>
                  </button>
                </div>
              </div>
            `);
          }
          reader.readAsDataURL(file);
        }
      });      // Remove image from preview
      $(document).on('click', '.remove-image', function () {
        $(this).closest('.position-relative').remove();
        // Clear the file input
        $('#courseImage').val('');
      });

      // Prerequisites and Goals as arrays functionality
      const prerequisites = [];
      const goals = [];

      // Function to update hidden fields with JSON arrays
      function updateHiddenFields() {
        $('#prerequisites-hidden').val(JSON.stringify(prerequisites));
        $('#goals-hidden').val(JSON.stringify(goals));
      }

      // Add prerequisite
      $('.add-prerequisite').on('click', function () {
        const input = $('.prerequisite-item');
        const value = input.val().trim();

        if (value) {
          // Add to array
          prerequisites.push(value);

          // Create tag
          const tagHtml = `<span class="tag-item">${value} <span class="remove-tag" data-type="prerequisite" data-value="${value}">×</span></span>`;
          $('#prerequisites-list').append(tagHtml);

          // Clear input
          input.val('');

          // Update hidden field
          updateHiddenFields();
        }
      });

      // Add goal
      $('.add-goal').on('click', function () {
        const input = $('.goal-item');
        const value = input.val().trim();

        if (value) {
          // Add to array
          goals.push(value);

          // Create tag
          const tagHtml = `<span class="tag-item">${value} <span class="remove-tag" data-type="goal" data-value="${value}">×</span></span>`;
          $('#goals-list').append(tagHtml);

          // Clear input
          input.val('');

          // Update hidden field
          updateHiddenFields();
        }
      });

      // Remove tag (prerequisite or goal)
      $(document).on('click', '.remove-tag', function () {
        const type = $(this).data('type');
        const value = $(this).data('value');

        // Remove from array
        if (type === 'prerequisite') {
          const index = prerequisites.indexOf(value);
          if (index !== -1) {
            prerequisites.splice(index, 1);
          }
        } else if (type === 'goal') {
          const index = goals.indexOf(value);
          if (index !== -1) {
            goals.splice(index, 1);
          }
        }

        // Remove tag from UI
        $(this).parent().remove();

        // Update hidden field
        updateHiddenFields();
      });

      // Allow pressing Enter to add items
      $('.prerequisite-item').keypress(function (e) {
        if (e.which === 13) {
          e.preventDefault();
          $('.add-prerequisite').click();
        }
      });

      $('.goal-item').keypress(function (e) {
        if (e.which === 13) {
          e.preventDefault();
          $('.add-goal').click();
        }
      });

      // Initialize hidden fields
      updateHiddenFields();
    });
  </script>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center">
    <i class="bi bi-arrow-up-short"></i>
  </a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- JS Files (in order) -->
  <script src="js/main.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/custom.js"></script>
  <script src="assets/js/sidebar-tog.js"></script>
  <script src="js/image-upload.js"></script>
  <script src="js/main.js"></script>
  <script src="js/manager.js"></script>
  <script src="js/logout.js"></script>

</body>

</html>